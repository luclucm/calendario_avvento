

<!DOCTYPE html>
<html lang="it">
<link "https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calendario dell'AvventoðŸŽ„</title>
<style>
  :root {
    --spotify: #1DB954;
    --rosso: #c0392b;
  }

  body {
    font-family: 'Luckiest Guy', cursive;
    background: #f2f2f2 url('https://st.depositphotos.com/1719108/1204/i/950/depositphotos_12049366-stock-illustration-the-funny-christmas-drawing-santa.jpg') no-repeat center center fixed;
    background-size: cover;
    text-align: center;
    margin: 0;
    padding: 10px;
  }

  /* âœ… Fix sfondo su mobile */
  @media (max-width: 768px) {
    body {
      background-attachment: scroll; /* disattiva fixed che su mobile puÃ² dare problemi */
      background-size: cover;
      background-position: center;
    }
  }

  h1 {
    color: #fff;
    text-shadow: 2px 2px 4px #000;
    margin-top: 20px;
    font-size: 2.5em;
  }

  
  .calendario {
    display: grid;
    gap: 10px;
    width: 100%;
    max-width: 900px;
    margin: 30px auto;
    padding: 0 10px;
  }
  
  /* Desktop: 4 colonne */
  @media (min-width: 900px) {
    .calendario {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  
  /* Tablet: 3 colonne */
  @media (min-width: 600px) and (max-width: 899px) {
    .calendario {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  /* Mobile: 2 colonne */
  @media (max-width: 599px) {
    .calendario {
      grid-template-columns: repeat(2, 1fr);
    }
  }


  .casella {
    background: var(--rosso);
    color: #fff;
    font-size: 1.8em;
    font-weight: bold;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    aspect-ratio: 1 / 1;
    text-decoration: none;
    transition: transform 0.6s;
    transform-style: preserve-3d;
    will-change: transform;
  }

  .casella:hover { transform: scale(1.05); }
  .casella.flip { transform: rotateY(180deg); }

  .bloccato {
    background: gray;
    pointer-events: none;
  }
  .aperto { background: #27ae60; }
  .oggi {
    background: #f1c40f;
    color: #000;
  }

  /* ===========================
     Modal (popup)
     =========================== */
  .no-scroll { overflow: hidden; }

  .modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(3px);
    display: grid;
    place-items: center;
    padding: 16px;

    /* transizioni di apparizione */
    visibility: hidden;
    opacity: 0;
    transition: opacity .25s ease, visibility .25s ease;
    z-index: 1000;
  }
  .modal-backdrop.show {
    visibility: visible;
    opacity: 1;
  }

  .modal {
    width: min(520px, 100%);
    background: rgba(255,255,255,0.92);
    color: #333;
    border-radius: 14px;
    box-shadow: 0 12px 36px rgba(0,0,0,0.3);
    overflow: hidden;

    /* transizione di salita */
    transform: translateY(10px);
    transition: transform .25s ease;
  }
  .modal-backdrop.show .modal {
    transform: translateY(0);
  }

  .modal-header {
    padding: 18px 20px 0;
  }
  .modal-title {
    margin: 0;
    font-size: 1.4rem;
  }

  .modal-body {
    padding: 10px 20px 20px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; /* piÃ¹ leggibile per testo */
    line-height: 1.5;
    font-weight: 500;
  }

  .modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    padding: 0 20px 20px;
  }

  .btn {
    appearance: none;
    border: none;
    border-radius: 10px;
    padding: 12px 16px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
  }
  .btn-primary {
    background: var(--spotify);
    color: #fff;
  }
  .btn-secondary {
    background: #e0e0e0;
    color: #333;
  }

  .close-x {
    position: absolute;
    top: 10px;
    right: 12px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: none;
    background: transparent;
    font-size: 1.4rem;
    line-height: 1;
    cursor: pointer;
    color: #444;
  }
  .close-x:hover { color: #000; }

  @media (max-width: 600px) {
    h1 { font-size: 1.8em; }
    .calendario {
      grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
      gap: 8px;
    }
    .casella { font-size: 1.2em; }

    .modal-title { font-size: 1.2rem; }
    .modal-body { font-size: 0.95rem; }
  }
</style>
</head>
<body>
  <h1>ðŸŽ„ Calendario dell'Avvento patata ðŸŽ„</h1>
  <div class="calendario" id="calendario"></div>

  <!-- ===========================
       Modal markup
       =========================== -->
  <div class="modal-backdrop" id="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <button class="close-x" id="btn-close" aria-label="Chiudi">Ã—</button>
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title">Giorno X</h2>
      </div>
      <div class="modal-body">
        <p id="modal-text">Descrizione del brano/attivitÃ .</p>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="btn-cancel">Chiudi</button>
        <button class="btn btn-primary" id="btn-spotify">Apri su Spotify</button>
      </div>
    </div>
  </div>

<script>
  // Data di oggi
  const oggi = new Date();
  const giornoCorrente = oggi.getDate(); // es. 3 dicembre -> 3

  // Link Spotify per i giorni (compila fino a 24)
  const linksSpotify = [
    "https://open.spotify.com/track/ID1", // Giorno 1
    "https://open.spotify.com/track/ID2", // Giorno 2
    // ...
  ];

  // Brevi descrizioni per ciascun giorno (compila fino a 24)
  const descrizioni = [
    "Un classico natalizio per iniziare con il piede giusto! ðŸŽ¶",
    "Oggi ci scaldiamo con un brano dal ritmo allegro.",
    // ...
  ];

  // Riferimenti al modal
  const backdrop = document.getElementById('modal-backdrop');
  const modalTitle = document.getElementById('modal-title');
  const modalText = document.getElementById('modal-text');
  const btnSpotify = document.getElementById('btn-spotify');
  const btnClose = document.getElementById('btn-close');
  const btnCancel = document.getElementById('btn-cancel');

  // Funzioni per aprire/chiudere il modal
  function openModal(day, url) {
    modalTitle.textContent = `Giorno ${day}`;
    modalText.textContent = descrizioni[day - 1] || "Pronti a scoprire il brano di oggi? ðŸŽ„";
    btnSpotify.onclick = () => { window.location.href = url; };

    backdrop.classList.add('show');
    backdrop.setAttribute('aria-hidden', 'false');
    document.body.classList.add('no-scroll');

    // Porta il focus sul bottone principale (accessibilitÃ )
    setTimeout(() => btnSpotify.focus(), 50);
  }

  function closeModal() {
    backdrop.classList.remove('show');
    backdrop.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('no-scroll');
  }

  // Chiudi con pulsanti
  btnClose.addEventListener('click', closeModal);
  btnCancel.addEventListener('click', closeModal);

  // Chiudi cliccando fuori
  backdrop.addEventListener('click', (e) => {
    if (e.target === backdrop) closeModal();
  });

  // Chiudi con ESC
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });

  // Costruzione caselle
  const calendario = document.getElementById('calendario');
  for (let i = 1; i <= 24; i++) {
    const link = document.createElement('a');
    link.className = 'casella';
    link.textContent = i;

    if (i <= linksSpotify.length) link.href = linksSpotify[i - 1];

    if (i > giornoCorrente) {
      link.classList.add('bloccato'); // Giorni futuri
    } else if (i === giornoCorrente) {
      link.classList.add('oggi'); // Giorno corrente
    } else {
      link.classList.add('aperto'); // Giorni passati
    }

    // Click: mostra popup invece di redirigere subito
    if (i <= giornoCorrente && link.href) {
      link.addEventListener('click', (e) => {
        e.preventDefault();

        // opzionale: piccola animazione di flip prima del popup
        link.classList.add('flip');
        setTimeout(() => {
          openModal(i, link.href);
          // rimuovi flip per poter riapplicare animazione su futuri clic
          link.classList.remove('flip');
        }, 300);
      });
    }

    calendario.appendChild(link);
  }
</script>
</body>
</html>

