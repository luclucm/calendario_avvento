

<!DOCTYPE html>
<html lang="it">
<link "https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calendario dell'AvventoüéÑ</title>
<style>
  :root {
    --spotify: #1DB954;
    --rosso: #c0392b;
  }

  body {
    font-family: 'Luckiest Guy', cursive;
    background: #f2f2f2 url('https://cdn.creatureandcoagency.com/uploads/2020/10/Facts-about-Chrismtas-5.jpg') no-repeat center center fixed;
    background-size: cover;
    text-align: center;
    margin: 0;
    padding: 10px;
  }

  /* ‚úÖ Fix sfondo su mobile */
  @media (max-width: 768px) {
    body {
      background-attachment: scroll; /* disattiva fixed che su mobile pu√≤ dare problemi */
      background-size: cover;
      background-position: center;
    }
  }

  h1 {
    color: #fff;
    text-shadow: 2px 2px 4px #000;
    margin-top: 20px;
    font-size: 2.5em;
  }

  
  .calendario {
    display: grid;
    gap: 10px;
    width: 100%;
    max-width: 900px;
    margin: 30px auto;
    padding: 0 10px;
  }
  
  /* Desktop: 4 colonne */
  @media (min-width: 900px) {
    .calendario {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  
  /* Tablet: 3 colonne */
  @media (min-width: 600px) and (max-width: 899px) {
    .calendario {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  /* Mobile: 2 colonne */
  @media (max-width: 599px) {
    .calendario {
      grid-template-columns: repeat(2, 1fr);
    }
  }


  .casella {
    background: var(--rosso);
    color: #fff;
    font-size: 1.8em;
    font-weight: bold;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    aspect-ratio: 1 / 1;
    text-decoration: none;
    transition: transform 0.6s;
    transform-style: preserve-3d;
    will-change: transform;
  }

  .casella:hover { transform: scale(1.05); }
  .casella.flip { transform: rotateY(180deg); }

  .bloccato {
    background: gray;
    pointer-events: none;
  }
  .aperto { background: #27ae60; }
  .oggi {
    background: #f1c40f;
    color: #000;
  }

  /* ===========================
     Modal (popup)
     =========================== */
  .no-scroll { overflow: hidden; }

  .modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(3px);
    display: grid;
    place-items: center;
    padding: 16px;

    /* transizioni di apparizione */
    visibility: hidden;
    opacity: 0;
    transition: opacity .25s ease, visibility .25s ease;
    z-index: 1000;
  }
  .modal-backdrop.show {
    visibility: visible;
    opacity: 1;
  }

  .modal {
    width: min(520px, 100%);
    background: rgba(255,255,255,0.92);
    color: #333;
    border-radius: 14px;
    box-shadow: 0 12px 36px rgba(0,0,0,0.3);
    overflow: hidden;

    /* transizione di salita */
    transform: translateY(10px);
    transition: transform .25s ease;
  }
  .modal-backdrop.show .modal {
    transform: translateY(0);
  }

  .modal-header {
    padding: 18px 20px 0;
  }
  .modal-title {
    margin: 0;
    font-size: 1.4rem;
  }

  .modal-body {
    padding: 10px 20px 20px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; /* pi√π leggibile per testo */
    line-height: 1.5;
    font-weight: 500;
  }

  .modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    padding: 0 20px 20px;
  }

  .btn {
    appearance: none;
    border: none;
    border-radius: 10px;
    padding: 12px 16px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
  }
  .btn-primary {
    background: var(--spotify);
    color: #fff;
  }
  .btn-secondary {
    background: #e0e0e0;
    color: #333;
  }

  .close-x {
    position: absolute;
    top: 10px;
    right: 12px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: none;
    background: transparent;
    font-size: 1.4rem;
    line-height: 1;
    cursor: pointer;
    color: #444;
  }
  .close-x:hover { color: #000; }

  @media (max-width: 600px) {
    h1 { font-size: 1.8em; }
    .calendario {
      grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
      gap: 8px;
    }
    .casella { font-size: 1.2em; }

    .modal-title { font-size: 1.2rem; }
    .modal-body { font-size: 0.95rem; }
  }
</style>
</head>
<body>
  <h1>üéÑ Calendario dell'avvento ü•îü•î üéÑ</h1>
  <div class="calendario" id="calendario"></div>

  
<!-- AGGIUNTA: Popup introduttivo all'apertura -->
<div class="modal-backdrop" id="introBackdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="introTitle">
    <div class="modal-header" id="introTitle">üéÑ Benvenuta patata nel calendario dell‚Äôavvento</div>
    <div class="modal-body">
      <p id="introDescription">
        In questo calendario ho cercato di raccogliere delle storie e pensieri che mi piacciono, per condividere con te qualche pezzettino di me. Probabilmente alcune non sono proprio il tuo genere, per√≤ di chiedo di prendere solo qualche minuto della tua giornata, interrompere tutto e lasciarti trasportare dalla musica. Spero ti piaccia, buon viaggio üõ∏ 
      </p>
      <label style="display:flex;align-items:center;gap:8px;margin-top:8px;">
        <input type="checkbox" id="introHideForever">
        <span>Non mostrare pi√π questo messaggio</span>
      </label>
    </div>
    <div class="modal-actions">
      <button class="btn btn-close" id="introClose">Chiudi</button>
    </div>
  </div>
</div>


  <!-- ===========================
       Modal markup
       =========================== -->
  <div class="modal-backdrop" id="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <button class="close-x" id="btn-close" aria-label="Chiudi">√ó</button>
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title">Giorno X</h2>
      </div>
      <div class="modal-body">
        <p id="modal-text">Descrizione del brano/attivit√†.</p>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="btn-cancel">Chiudi</button>
        <button class="btn btn-primary" id="btn-spotify">Apri regalo üéÅ</button>
      </div>
    </div>
  </div>

<script>
  // Data di oggi
  const oggi = new Date();
  const giornoCorrente = oggi.getDate(); // es. 3 dicembre -> 3
  // const giornoCorrente = 100;

  // Link Spotify per i giorni (compila fino a 24)
  const linksSpotify = [
    "https://luclucm.github.io/calendario_avvento/", // Giorno 1
    "https://luclucm.github.io/calendario_avvento/", // Giorno 2
    "https://luclucm.github.io/calendario_avvento/", // Giorno 3
    "https://open.spotify.com/intl-it/track/4Hb81qyNmL1J5kpGw0RGIX?si=7d203c75e1ee46f5", // Giorno 8
    "https://open.spotify.com/intl-it/track/4KFAjy930IHiqnVyIvYQSX?si=b48396db63a54648", // Giorno 4
    "https://open.spotify.com/intl-it/track/5PWWE1zru2DTIQBUUjG1F5?si=baaf7c566d39417b", // Giorno 5
    "https://open.spotify.com/intl-it/track/2TkBlDMVfOwvCgAE1HgGJs?si=27ecede4051744df", // Giorno 6
    "https://open.spotify.com/intl-it/track/7E2JGYlbak8ss40Ts9At5w?si=89a678d93b6f407f", // Giorno 7
    "https://open.spotify.com/intl-it/track/4sM6LOWDoXE6HwE0uP95gi?si=472e5a7e934c4183", // Giorno 9
    "https://open.spotify.com/intl-it/track/5s9t3JvEkC7AY5LJbW04S2?si=f3469860918f4d32", // Giorno 10
    "https://open.spotify.com/intl-it/track/6Lld5N170CxESYeUTs9ajz?si=93b7c07fb74e4377", // Giorno 11
    "https://open.spotify.com/intl-it/track/5yXIZtEORaxvQB1yaJe1qq?si=11a39d6b53854d58", // Giorno 12
    "https://open.spotify.com/intl-it/track/1vIIlm4WH8ymz70wyLZuR9?si=44fbaacb96ff4335", // Giorno 13
    "https://open.spotify.com/intl-it/track/1tONDgDSEqtmmA0yB4BZmM?si=31660a223ef5482f", // Giorno 14
    "https://open.spotify.com/intl-it/track/3rGX2jDP3bTMrrQAVihhEb?si=9b08984ed11b40ba", // Giorno 15
    "https://open.spotify.com/intl-it/track/5vWRdNYlnukLT4GkWFpLEC?si=c9f782ef89ee40fd", // Giorno 16
    "https://open.spotify.com/intl-it/track/0elMj7AzidwaaPFyaY01UW?si=c11e18bd7dfb4480", // Giorno 17
    "https://open.spotify.com/intl-it/track/69kLZ80Yv9v35H6PLfmnjc?si=04b8d0d361f94763", // Giorno 18
    "https://open.spotify.com/intl-it/track/028LaD5Dah89XXoTgdQlus?si=6630c9b8029243b1", // Giorno 19
    "https://open.spotify.com/intl-it/track/7p7md8Dm119xZjWDi0CTCf?si=642c8c4982774ca6", // Giorno 20
    "https://open.spotify.com/intl-it/track/3YmBcOz5gaSPxE2nFQImrn?si=f78cb302fde24eee", // Giorno 21
    "https://open.spotify.com/intl-it/track/7CIEoF5upSOW08JIscz9K0?si=9a303a64d3aa4928", // Giorno 22
    "https://open.spotify.com/intl-it/track/0bUHiJU38MWBn7RL1D3DDO?si=05e5a8b03aad4a37", // Giorno 23
    "XXX", // Giorno 24
    // ...
  ];

  // Brevi descrizioni per ciascun giorno (compila fino a 24)
  const descrizioni = [
    "Sei arrivata tardi eheheh üòé",
    "Sei arrivata tardi eheheh üòé",
    "Sei arrivata tardi eheheh üòé" + <a href="https://www.youtube.com/watch?v=G3FnjOf3DQA&list=RDG3FnjOf3DQA&start_radio=1"> video </a>,
    "Ascolto consigliato: prima di dormire a luce spenta ‚≠ê",                        // Giorno 8 gio
    "Ascolto consigliato: la mattina mentre fai colazione üç™",                       // Giorno 4 ven
    "Ascolto consigliato: libero come questa canzone ‚õìÔ∏è‚Äçüí•",                            // Giorno 5 sab
    "Ascolto consigliato: mentre viaggi in macchina üöô",                             // Giorno 6 dom
    "Ascolto consigliato: mentre sei in treno, due volte: la prima guardando il video su youtube e la seconda guardando fuori dal finestrino üöÇ. Link video youtube: https://www.youtube.com/watch?v=G3FnjOf3DQA&list=RDG3FnjOf3DQA&start_radio=1",              // Giorno 7 lun
    "Per apprezzarla al meglio cerca la traduzione üòâ",                              // Giorno 9 mar
    "Ascolto consigliato: mentre passeggi per le vie di Padova üèôÔ∏è",                  // Giorno 13 mer
    "Ascolto consigliato: prima di dormire a luce spenta ‚≠ê (storia vera di Yaguine e Fod√©)",      // Giorno 12 gio
    "Ascolto consigliato: in cameretta guardando fuori dalla finestra ü™ü",           // Giorno 11 ven
    "Ascolto consigliato: un momento in cui sei sola con te stessa ‚ù§Ô∏è",              // Giorno 10 sab
    "Ascolto consigliato: prima di dormire a luce spenta ‚≠ê",                        // Giorno 14 dom
    "Ascolto consigliato: in treno osservando gli altri passeggeri üîç",              // Giorno 15 lun
    "Ascolto consigliato: mentre passeggi per le vie di Padova üèôÔ∏è",                  // Giorno 16 mar
    "Ascolto consigliato: guardando fuori dal finestrino del treno üöÇ",              // Giorno 21 mer
    "Canzone del 1973 eppure ancora cos√¨ attuale...üçâ",                          // Giorno 17 gio
    "Ascolto consigliato: quando vuoi sfogarti su chi se lo merita ‚úä",              // Giorno 18 ven
    "So che non √® decisamente il tuo genere, ma dagli una possibilit√† parla di una storia vera",    // Giorno 19 sab
    "Per apprezzarla al meglio cerca la traduzione üòâ",                              // Giorno 20 dom
    "Ascolto consigliato: facendola ascoltare a pi√π persone possibili üçâ",           // Giorno 22 lun
    "Ascolto consigliato: prima di dormire a luce spenta ‚≠ê",                        // Giorno 23 mar
    "XXX",  //
    
    // ...
  ];


  
  <!-- AGGIUNTA: Gestione popup INTRO -->
  const introBackdrop     = document.getElementById('introBackdrop');
  const introClose        = document.getElementById('introClose');
  const introHideForever  = document.getElementById('introHideForever');
  const introTitleEl      = document.getElementById('introTitle');
  
  function apriIntro() {
    introBackdrop.classList.add('show');
    introBackdrop.setAttribute('aria-hidden', 'false');
    document.body.classList.add('no-scroll');
    setTimeout(() => introTitleEl?.focus(), 0); // accessibilit√†
  }
  function chiudiIntro() {
    introBackdrop.classList.remove('show');
    introBackdrop.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('no-scroll');
    if (introHideForever && introHideForever.checked) {
      localStorage.setItem('introHidden', '1');
    }
  }
  introClose.addEventListener('click', chiudiIntro);
  introBackdrop.addEventListener('click', (e) => {
    if (e.target === introBackdrop) chiudiIntro();
  });
  document.addEventListener('DOMContentLoaded', () => {
    const nascondiIntro = localStorage.getItem('introHidden') === '1';
    if (!nascondiIntro) setTimeout(apriIntro, 200);
  });


  // Riferimenti al modal
  const backdrop = document.getElementById('modal-backdrop');
  const modalTitle = document.getElementById('modal-title');
  const modalText = document.getElementById('modal-text');
  const btnSpotify = document.getElementById('btn-spotify');
  const btnClose = document.getElementById('btn-close');
  const btnCancel = document.getElementById('btn-cancel');

  // Funzioni per aprire/chiudere il modal
  function openModal(day, url) {
    modalTitle.textContent = `Giorno ${day}`;
    //modalText.textContent = descrizioni[day - 1] || "Pronti a scoprire il brano di oggi? üéÑ";
    modalText.innerHTML = descrizioni[day - 1] || "Pronti a scoprire il brano di oggi? üéÑ";
    btnSpotify.onclick = () => { window.location.href = url; };

    backdrop.classList.add('show');
    backdrop.setAttribute('aria-hidden', 'false');
    document.body.classList.add('no-scroll');

    // Porta il focus sul bottone principale (accessibilit√†)
    setTimeout(() => btnSpotify.focus(), 50);
  }

  function closeModal() {
    backdrop.classList.remove('show');
    backdrop.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('no-scroll');
  }

  // Chiudi con pulsanti
  btnClose.addEventListener('click', closeModal);
  btnCancel.addEventListener('click', closeModal);

  // Chiudi cliccando fuori
  backdrop.addEventListener('click', (e) => {
    if (e.target === backdrop) closeModal();
  });

  // Chiudi con ESC
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });

  // Costruzione caselle
  const calendario = document.getElementById('calendario');
  for (let i = 1; i <= 24; i++) {
    const link = document.createElement('a');
    link.className = 'casella';
    link.textContent = i;

    if (i <= linksSpotify.length) link.href = linksSpotify[i - 1];

    if (i > giornoCorrente) {
      link.classList.add('bloccato'); // Giorni futuri
    } else if (i === giornoCorrente) {
      link.classList.add('oggi'); // Giorno corrente
    } else {
      link.classList.add('aperto'); // Giorni passati
    }

    // Click: mostra popup invece di redirigere subito
    if (i <= giornoCorrente && link.href) {
      link.addEventListener('click', (e) => {
        e.preventDefault();

        // opzionale: piccola animazione di flip prima del popup
        link.classList.add('flip');
        setTimeout(() => {
          openModal(i, link.href);
          // rimuovi flip per poter riapplicare animazione su futuri clic
          link.classList.remove('flip');
        }, 300);
      });
    }

    calendario.appendChild(link);
  }
</script>
</body>
</html>

